<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule Generator - Family First Scheduler</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
</head>
<body>
    <div class="app-container">
        <div class="schedule-generator-content">
            <h2>âš¡ Schedule Generator</h2>

            <div class="card">
                <h3>Generate Weekly Schedule</h3>
                <p>Create a detailed schedule for a specific week</p>
                <div class="form-group">
                    <label for="weekStartDate">Week Starting Date</label>
                    <input type="date" id="weekStartDate" />
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="includeWeekends" />
                        Include weekends
                    </label>
                </div>
                <button id="generateWeekSchedule">Generate Weekly Schedule</button>
                <div id="weekStatus"></div>
            </div>

            <div class="card">
                <h3>Generate Monthly Schedules</h3>
                <p>Create schedules for an entire month</p>
                <div class="form-group">
                    <label for="monthSelect">Select Month</label>
                    <input type="month" id="monthSelect" />
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="includeHolidays" checked />
                        Include holiday schedules
                    </label>
                </div>
                <button id="generateMonthSchedules">Generate Monthly Schedules</button>
                <div id="monthStatus"></div>
            </div>

            <div class="card">
                <h3>Quick Actions</h3>
                <button id="generateTodaySchedule">Generate Today's Schedule</button>
                <button id="generateTomorrowSchedule">Generate Tomorrow's Schedule</button>
                <button id="clearAllSchedules">Clear All Schedules</button>
            </div>

            <div class="card">
                <h3>Generation History</h3>
                <div id="generationHistory">
                    <p>No recent generations</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set default dates
        window.addEventListener('load', () => {
            const today = new Date();
            const weekStart = new Date(today);
            weekStart.setDate(today.getDate() - today.getDay()); // Start of week (Sunday)

            document.getElementById('weekStartDate').value = weekStart.toISOString().split('T')[0];

            const currentMonth = today.toISOString().slice(0, 7); // YYYY-MM format
            document.getElementById('monthSelect').value = currentMonth;
        });

        // Generate weekly schedule
        document.getElementById('generateWeekSchedule').addEventListener('click', async () => {
            const statusDiv = document.getElementById('weekStatus');
            const startDate = document.getElementById('weekStartDate').value;
            const includeWeekends = document.getElementById('includeWeekends').checked;

            if (!startDate) {
                statusDiv.innerHTML = '<p style="color: red;">Please select a start date</p>';
                return;
            }

            statusDiv.innerHTML = '<p>Generating weekly schedule...</p>';

            try {
                // This would normally call the main process
                // For now, just show a success message
                setTimeout(() => {
                    statusDiv.innerHTML = '<p style="color: green;">Weekly schedule generated successfully!</p>';
                    updateHistory('Weekly schedule for ' + startDate);
                }, 2000);
            } catch (error) {
                statusDiv.innerHTML = '<p style="color: red;">Error: ' + error.message + '</p>';
            }
        });

        // Generate monthly schedules
        document.getElementById('generateMonthSchedules').addEventListener('click', async () => {
            const statusDiv = document.getElementById('monthStatus');
            const month = document.getElementById('monthSelect').value;
            const includeHolidays = document.getElementById('includeHolidays').checked;

            if (!month) {
                statusDiv.innerHTML = '<p style="color: red;">Please select a month</p>';
                return;
            }

            statusDiv.innerHTML = '<p>Generating monthly schedules...</p>';

            try {
                // This would normally call the main process
                setTimeout(() => {
                    statusDiv.innerHTML = '<p style="color: green;">Monthly schedules generated successfully!</p>';
                    updateHistory('Monthly schedules for ' + month);
                }, 3000);
            } catch (error) {
                statusDiv.innerHTML = '<p style="color: red;">Error: ' + error.message + '</p>';
            }
        });

        // Quick actions
        document.getElementById('generateTodaySchedule').addEventListener('click', () => {
            const today = new Date().toISOString().split('T')[0];
            updateHistory('Today\'s schedule generated');
        });

        document.getElementById('generateTomorrowSchedule').addEventListener('click', () => {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const dateStr = tomorrow.toISOString().split('T')[0];
            updateHistory('Tomorrow\'s schedule generated');
        });

        document.getElementById('clearAllSchedules').addEventListener('click', () => {
            if (confirm('Are you sure you want to clear all schedules?')) {
                updateHistory('All schedules cleared');
            }
        });

        // Update generation history
        function updateHistory(action) {
            const historyDiv = document.getElementById('generationHistory');
            const timestamp = new Date().toLocaleString();
            const entry = `<p><small>${timestamp}:</small> ${action}</p>`;

            if (historyDiv.innerHTML.includes('No recent generations')) {
                historyDiv.innerHTML = entry;
            } else {
                historyDiv.innerHTML = entry + historyDiv.innerHTML;
            }
        }
    </script>
</body>
</html>
